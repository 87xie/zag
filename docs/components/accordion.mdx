### Features

✅ Full keyboard navigation.

✅ Can expand one or multiple items.

✅ Can be controlled or uncontrolled.

## Installation

To use the accordion machine in your project, install the respective package

```jsx
import * as Accordion from "@ui-machines/accordion"
```

If you're using React, you'll also need to install the `@ui-machines/react` binding

<CodeSnippet id="accordion/installation.mdx" />

## Usage

The accordion package exports two key artifacts:

- `machine`: The state machine logic for the accordion widget as described in WAI-ARIA specification.
- `connect`: The function that translates the machine's state to DOM attributes and event handlers.

<CodeSnippet id="accordion/usage.mdx" />

## Opening multiple accordions at once

To allow multiple items to be expanded at once, set `multiple` to `true`. This mode implicitly sets `collapsible` to
`true` to also ensure that each accordion can be expanded.

```jsx
const [state, send] = useMachine(Accordion.machine, {
  context: { multiple: true },
})
```

## Opening specific accordions

To set the value of the accordion(s) that should be opened initially, use the `withContext(...)` pattern and pass the
`value` attribute.

```jsx
// for multiple accordions
const [state, send] = useMachine(
  Accordion.machine.withContext({
    multiple: true,
    value: ["home"],
  }),
)

// for single accordions
const [state, send] = useMachine(
  Accordion.machine.withContext({
    value: "home",
  }),
)
```

## Controlling accordion state via props

The `useMachine` hook provides a way to pass **controlled** context into the machine, making it easier to
programmatically control the machine's behavior or context.

```jsx
function Accordion({ multiple }) {
  // controlled pattern
  const [state, send] = useMachine(Accordion.machine, {
    context: { multiple },
  })

  // uncontrolled pattern
  const [state, send] = useMachine(Accordion.machine.withContext({ multiple }))
}

function Example() {
  return <Accordion multiple />
}
```

> If you only need to set the accordion's context initially you can use the `Accordion.machine.withContext({...})`
> pattern. It won't respond to updates afterwards.

## Styling the expanded state

When an accordion item is expanded, a `data-expanded` attribute is set on the accordion trigger element. When it closes,
the `data-expanded` attribute is removed.

```css
.accordion-trigger {
  background: white;
}

/* Styling the expanded state */
.accordion-trigger[data-expanded] {
  background: red;
}
```

> The style above assumes that you passed `.accordion-trigger` classname to the accordion trigger button element.
